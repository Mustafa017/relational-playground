language: node_js

node_js:
- node

os:
- linux
- osx
- windows

cache:
  directories:
  - node_modules

script:
- yarn lint
- yarn flow
- flow stop
- yarn test
- yarn build

matrix:
  allow_failures:
  - os: windows

jobs:
  include:
    - stage: deploy
      deploy:
        provider: surge
        skip_cleanup: true
        project: ./build/
        domain: relational-playground.surge.sh
      on:
        branch: master
      os: linux
      node_js: stable
